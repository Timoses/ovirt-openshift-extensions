FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IG92aXJ0LWZsZXh2b2x1bWUtZHJpdmVyLWFwYgpkZXNjcmlwdGlv\
bjogVGhpcyBpcyBhIHNhbXBsZSBhcHBsaWNhdGlvbiBnZW5lcmF0ZWQgYnkgYXBiIGluaXQKYmlu\
ZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogb3Zp\
cnQtZmxleHZvbHVtZS1kcml2ZXIgKEFQQikKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhh\
dCwgSW5jLiIKICBsb25nRGVzY3JpcHRpb246IG92aXJ0LWZsZXh2b2x1bWUtZHJpdmVyIGlzIGFu\
IGltcGxlbWVudGFpb24gb2YgYW4gZXh0ZXJuYWwsIGZsZXggdm9sdW1lIGRyaXZlcgogICAgdGhh\
dCBwcm92aXNpb24gYW5kIGF0dGFjaGVzIG92aXJ0IHZvbHVtZXMgYXMgcGVyc2lzdGVudCB2b2x1\
bWVzIHRvIHBvZHMuCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRo\
aXMgZGVmYXVsdCBwbGFuIGRlcGxveXMgb3ZpcnQtZmxleHZvbHVtZS1kcml2ZXItYXBiCiAgICBm\
cmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTog\
YWRtaW5fdXNlcgogICAgICAgIHRpdGxlOiBPcGVuc2hpZnQgQ2x1c3RlciBBZG1pbiBVc2VyCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0\
OiBkZXZlbG9wZXIKICAgICAgLSBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICAgIHRpdGxlOiBP\
cGVuc2hpZnQgQ2x1c3RlciBBZG1pbiBQYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAg\
IGRlZmF1bHQ6IGRldmVsb3BlcgogICAgICAtIG5hbWU6IGVuZ2luZV91cmwKICAgICAgICB0aXRs\
ZTogb1ZpcnQgZW5naW5lIEFkZHJlc3MKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1\
aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IGh0dHBzOi8vbG9jYWxob3N0L292aXJ0LWVuZ2lu\
ZS9hcGkKICAgICAgLSBuYW1lOiBlbmdpbmVfdXNlcm5hbWUKICAgICAgICB0aXRsZTogb1ZpcnQg\
QWRtaW4gVXNlcgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAg\
ICAgICAgZGVmYXVsdDogYWRtaW5AaW50ZXJuYWwKICAgICAgLSBuYW1lOiBlbmdpbmVfcGFzc3dv\
cmQKICAgICAgICB0aXRsZTogb1ZpcnQgQWRtaW4gUGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IFRydWU="













COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
